<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ggcorrmat • ggstatsplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../../favicon.ico">
<link rel="manifest" href="../../site.webmanifest">
<script src="../../lightswitch.js"></script><script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="ggcorrmat">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">ggstatsplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.13.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../articles/ggstatsplot.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Primary functions</h6></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggbetweenstats.html">ggbetweenstats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggwithinstats.html">ggwithinstats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/gghistostats.html">gghistostats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggdotplotstats.html">ggdotplotstats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggcorrmat.html">ggcorrmat</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggscatterstats.html">ggscatterstats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggbarstats.html">ggbarstats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggpiestats.html">ggpiestats</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/ggcoefstats.html">ggcoefstats</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Miscellaneous</h6></li>
    <li><a class="dropdown-item" href="../../articles/additional.html">Additional vignettes</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/pairwise.html">Pairwise comparisons with `{ggstatsplot}`</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/faq.html">Frequently Asked Questions (FAQ)</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/purrr_examples.html">Using 'ggstatsplot' with the 'purrr' package</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/principles.html">Graphic design and statistical reporting principles</a></li>
    <li><a class="dropdown-item" href="../../articles/web_only/interpretation.html">Interpretation of Bayes Factors</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/IndrajeetPatil/ggstatsplot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>ggcorrmat</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/IndrajeetPatil/ggstatsplot/blob/main/vignettes/web_only/ggcorrmat.Rmd" class="external-link"><code>vignettes/web_only/ggcorrmat.Rmd</code></a></small>
      <div class="d-none name"><code>ggcorrmat.Rmd</code></div>
    </div>

    
    
<hr>
<p>You can cite this package/vignette as:</p>
<pre><code>To cite package 'ggstatsplot' in publications use:

  Patil, I. (2021). Visualizations with statistical details: The
  'ggstatsplot' approach. Journal of Open Source Software, 6(61), 3167,
  doi:10.21105/joss.03167

A BibTeX entry for LaTeX users is

  @Article{,
    doi = {10.21105/joss.03167},
    url = {https://doi.org/10.21105/joss.03167},
    year = {2021},
    publisher = {{The Open Journal}},
    volume = {6},
    number = {61},
    pages = {3167},
    author = {Indrajeet Patil},
    title = {{Visualizations with statistical details: The {'ggstatsplot'} approach}},
    journal = {{Journal of Open Source Software}},
  }</code></pre>
<hr>
<p>Lifecycle: <a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></p>
<p>The function <code><a href="../../reference/ggcorrmat.html">ggcorrmat()</a></code> provides a quick way to produce
<strong>publication-ready correlation matrix</strong> (aka
<em>correlalogram</em>) plot. The function can also be used for quick
<strong>data exploration</strong>. In addition to the plot, it can also
be used to get a correlation coefficient matrix or the associated
<em>p</em>-value matrix. This function is a convenient wrapper around
<code><a href="https://rdrr.io/pkg/ggcorrplot/man/ggcorrplot.html" class="external-link">ggcorrplot::ggcorrplot()</a></code> function with some additional
functionality.</p>
<p>We will see examples of how to use this function in this vignette
with the <code>gapminder</code> and <code>diamonds</code> dataset.</p>
<p>To begin with, here are some instances where you would want to use
<code>ggcorrmat</code>-</p>
<ul>
<li>to easily visualize a correlation matrix using
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>
</li>
<li>to quickly explore correlation between (all) numeric variables in
the dataset</li>
</ul>
<div class="section level2">
<h2 id="correlation-matrix-plot-with-ggcorrmat">Correlation matrix plot with <code>ggcorrmat()</code><a class="anchor" aria-label="anchor" href="#correlation-matrix-plot-with-ggcorrmat"></a>
</h2>
<p>For the first example, we will use the <code>gapminder</code> dataset
(available in eponymous <a href="https://CRAN.R-project.org/package=gapminder" class="external-link">package</a> on CRAN)
provides values for life expectancy, Gross Domestic Product (GDP) per
capita, and population, every five years, from 1952 to 2007, for each of
142 countries and was collected by the Gapminder Foundation. Let’s have
a look at the data-</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder" class="external-link">gapminder</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1,704</span></span>
<span><span class="co">#&gt; Columns: 6</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">country  </span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "Afghanistan"<span style="color: #949494;">, </span>"Afghanistan"<span style="color: #949494;">, </span>"Afghanistan"<span style="color: #949494;">, </span>"Afghanistan"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">continent</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>Asia<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">year     </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1952<span style="color: #949494;">, </span>1957<span style="color: #949494;">, </span>1962<span style="color: #949494;">, </span>1967<span style="color: #949494;">, </span>1972<span style="color: #949494;">, </span>1977<span style="color: #949494;">, </span>1982<span style="color: #949494;">, </span>1987<span style="color: #949494;">, </span>1992<span style="color: #949494;">, </span>1997<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">lifeExp  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 28.801<span style="color: #949494;">, </span>30.332<span style="color: #949494;">, </span>31.997<span style="color: #949494;">, </span>34.020<span style="color: #949494;">, </span>36.088<span style="color: #949494;">, </span>38.438<span style="color: #949494;">, </span>39.854<span style="color: #949494;">, </span>40.8…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">pop      </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 8425333<span style="color: #949494;">, </span>9240934<span style="color: #949494;">, </span>10267083<span style="color: #949494;">, </span>11537966<span style="color: #949494;">, </span>13079460<span style="color: #949494;">, </span>14880372<span style="color: #949494;">, </span>12…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">gdpPercap</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 779.4453<span style="color: #949494;">, </span>820.8530<span style="color: #949494;">, </span>853.1007<span style="color: #949494;">, </span>836.1971<span style="color: #949494;">, </span>739.9811<span style="color: #949494;">, </span>786.1134<span style="color: #949494;">, </span>…</span></span></code></pre></div>
<p>Let’s say we are interested in studying correlation between
population of a country, average life expectancy, and GDP per capita
across countries only for the year 2007.</p>
<p>The simplest way to get a correlation matrix is to stick to the
defaults-</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## select data only from the year 2007</span></span>
<span><span class="va">gapminder_2007</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">gapminder</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/gapminder/reference/gapminder.html" class="external-link">gapminder</a></span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## producing the correlation matrix</span></span>
<span><span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gapminder_2007</span>, <span class="co">## data from which variable is to be taken</span></span>
<span>  cor.vars <span class="op">=</span> <span class="va">lifeExp</span><span class="op">:</span><span class="va">gdpPercap</span> <span class="co">## specifying correlation matrix variables</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat1-1.png" width="100%"></p>
<p>This plot can be further modified with additional arguments-</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gapminder_2007</span>, <span class="co">## data from which variable is to be taken</span></span>
<span>  cor.vars <span class="op">=</span> <span class="va">lifeExp</span><span class="op">:</span><span class="va">gdpPercap</span>, <span class="co">## specifying correlation matrix variables</span></span>
<span>  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Life Expectancy"</span>,</span>
<span>    <span class="st">"population"</span>,</span>
<span>    <span class="st">"GDP (per capita)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"np"</span>, <span class="co">## which correlation coefficient is to be computed</span></span>
<span>  lab.col <span class="op">=</span> <span class="st">"red"</span>, <span class="co">## label color</span></span>
<span>  ggtheme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span>, <span class="co">## selected ggplot2 theme</span></span>
<span>  <span class="co">## turn off default ggestatsplot theme overlay</span></span>
<span>  matrix.type <span class="op">=</span> <span class="st">"lower"</span>, <span class="co">## correlation matrix structure</span></span>
<span>  colors <span class="op">=</span> <span class="cn">NULL</span>, <span class="co">## turning off manual specification of colors</span></span>
<span>  palette <span class="op">=</span> <span class="st">"category10_d3"</span>, <span class="co">## choosing a color palette</span></span>
<span>  package <span class="op">=</span> <span class="st">"ggsci"</span>, <span class="co">## package to which color palette belongs</span></span>
<span>  title <span class="op">=</span> <span class="st">"Gapminder correlation matrix"</span>, <span class="co">## custom title</span></span>
<span>  subtitle <span class="op">=</span> <span class="st">"Source: Gapminder Foundation"</span> <span class="co">## custom subtitle</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat2-1.png" width="100%"></p>
<p>As seen from this correlation matrix, although there is no
relationship between population and life expectancy worldwide, at least
in 2007, there is a strong positive relationship between GDP, a
well-established indicator of a country’s economic performance.</p>
<p>Given that there were only three variables, this doesn’t look that
impressive. So let’s work with another example from
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> package: the <code>diamonds</code> <a href="http://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">dataset</a>.
This dataset contains the prices and other attributes of almost 54,000
diamonds.</p>
<p>Let’s have a look at the data-</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 53,940</span></span>
<span><span class="co">#&gt; Columns: 10</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">carat  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.23<span style="color: #949494;">, </span>0.21<span style="color: #949494;">, </span>0.23<span style="color: #949494;">, </span>0.29<span style="color: #949494;">, </span>0.31<span style="color: #949494;">, </span>0.24<span style="color: #949494;">, </span>0.24<span style="color: #949494;">, </span>0.26<span style="color: #949494;">, </span>0.22<span style="color: #949494;">, </span>0.23<span style="color: #949494;">, </span>0.…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">cut    </span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> Ideal<span style="color: #949494;">, </span>Premium<span style="color: #949494;">, </span>Good<span style="color: #949494;">, </span>Premium<span style="color: #949494;">, </span>Good<span style="color: #949494;">, </span>Very Good<span style="color: #949494;">, </span>Very Good<span style="color: #949494;">, </span>Ver…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">color  </span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> E<span style="color: #949494;">, </span>E<span style="color: #949494;">, </span>E<span style="color: #949494;">, </span>I<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>I<span style="color: #949494;">, </span>H<span style="color: #949494;">, </span>E<span style="color: #949494;">, </span>H<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>F<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>E<span style="color: #949494;">, </span>E<span style="color: #949494;">, </span>I<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>J<span style="color: #949494;">, </span>I<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">clarity</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> SI2<span style="color: #949494;">, </span>SI1<span style="color: #949494;">, </span>VS1<span style="color: #949494;">, </span>VS2<span style="color: #949494;">, </span>SI2<span style="color: #949494;">, </span>VVS2<span style="color: #949494;">, </span>VVS1<span style="color: #949494;">, </span>SI1<span style="color: #949494;">, </span>VS2<span style="color: #949494;">, </span>VS1<span style="color: #949494;">, </span>SI1<span style="color: #949494;">, </span>VS1<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">depth  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 61.5<span style="color: #949494;">, </span>59.8<span style="color: #949494;">, </span>56.9<span style="color: #949494;">, </span>62.4<span style="color: #949494;">, </span>63.3<span style="color: #949494;">, </span>62.8<span style="color: #949494;">, </span>62.3<span style="color: #949494;">, </span>61.9<span style="color: #949494;">, </span>65.1<span style="color: #949494;">, </span>59.4<span style="color: #949494;">, </span>64…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">table  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 55<span style="color: #949494;">, </span>61<span style="color: #949494;">, </span>65<span style="color: #949494;">, </span>58<span style="color: #949494;">, </span>58<span style="color: #949494;">, </span>57<span style="color: #949494;">, </span>57<span style="color: #949494;">, </span>55<span style="color: #949494;">, </span>61<span style="color: #949494;">, </span>61<span style="color: #949494;">, </span>55<span style="color: #949494;">, </span>56<span style="color: #949494;">, </span>61<span style="color: #949494;">, </span>54<span style="color: #949494;">, </span>62<span style="color: #949494;">, </span>58…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">price  </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 326<span style="color: #949494;">, </span>326<span style="color: #949494;">, </span>327<span style="color: #949494;">, </span>334<span style="color: #949494;">, </span>335<span style="color: #949494;">, </span>336<span style="color: #949494;">, </span>336<span style="color: #949494;">, </span>337<span style="color: #949494;">, </span>337<span style="color: #949494;">, </span>338<span style="color: #949494;">, </span>339<span style="color: #949494;">, </span>340<span style="color: #949494;">, </span>34…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">x      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.95<span style="color: #949494;">, </span>3.89<span style="color: #949494;">, </span>4.05<span style="color: #949494;">, </span>4.20<span style="color: #949494;">, </span>4.34<span style="color: #949494;">, </span>3.94<span style="color: #949494;">, </span>3.95<span style="color: #949494;">, </span>4.07<span style="color: #949494;">, </span>3.87<span style="color: #949494;">, </span>4.00<span style="color: #949494;">, </span>4.…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">y      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.98<span style="color: #949494;">, </span>3.84<span style="color: #949494;">, </span>4.07<span style="color: #949494;">, </span>4.23<span style="color: #949494;">, </span>4.35<span style="color: #949494;">, </span>3.96<span style="color: #949494;">, </span>3.98<span style="color: #949494;">, </span>4.11<span style="color: #949494;">, </span>3.78<span style="color: #949494;">, </span>4.05<span style="color: #949494;">, </span>4.…</span></span>
<span><span class="co">#&gt; $ <span style="font-weight: bold;">z      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2.43<span style="color: #949494;">, </span>2.31<span style="color: #949494;">, </span>2.31<span style="color: #949494;">, </span>2.63<span style="color: #949494;">, </span>2.75<span style="color: #949494;">, </span>2.48<span style="color: #949494;">, </span>2.47<span style="color: #949494;">, </span>2.53<span style="color: #949494;">, </span>2.49<span style="color: #949494;">, </span>2.39<span style="color: #949494;">, </span>2.…</span></span></code></pre></div>
<p>Let’s see the correlation matrix between different attributes of the
diamond and the price.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## let's use just 5% of the data to speed it up</span></span>
<span><span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>, size <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  cor.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">carat</span>, <span class="va">depth</span><span class="op">:</span><span class="va">z</span><span class="op">)</span>, <span class="co">## note how the variables are getting selected</span></span>
<span>  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"carat"</span>,</span>
<span>    <span class="st">"total depth"</span>,</span>
<span>    <span class="st">"table"</span>,</span>
<span>    <span class="st">"price"</span>,</span>
<span>    <span class="st">"length (in mm)"</span>,</span>
<span>    <span class="st">"width (in mm)"</span>,</span>
<span>    <span class="st">"depth (in mm)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  ggcorrplot.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>outline.color <span class="op">=</span> <span class="st">"black"</span>, hc.order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat3-1.png" width="100%"></p>
<p>We can make a number of changes to this basic correlation matrix. For
example, since we were interested in relationship between price and
other attributes, let’s make the <code>price</code> column to the the
first column.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## let's use just 5% of the data to speed it up</span></span>
<span><span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>, size <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  cor.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">price</span>, <span class="va">carat</span>, <span class="va">depth</span><span class="op">:</span><span class="va">table</span>, <span class="va">x</span><span class="op">:</span><span class="va">z</span><span class="op">)</span>, <span class="co">## note how the variables are getting selected</span></span>
<span>  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"price"</span>,</span>
<span>    <span class="st">"carat"</span>,</span>
<span>    <span class="st">"total depth"</span>,</span>
<span>    <span class="st">"table"</span>,</span>
<span>    <span class="st">"length (in mm)"</span>,</span>
<span>    <span class="st">"width (in mm)"</span>,</span>
<span>    <span class="st">"depth (in mm)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"np"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Relationship between diamond attributes and price"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Dataset: Diamonds from ggplot2 package"</span>,</span>
<span>  colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span><span class="op">)</span>,</span>
<span>  pch <span class="op">=</span> <span class="st">"square cross"</span>,</span>
<span>  <span class="co">## additional aesthetic arguments passed to `ggcorrmat()`</span></span>
<span>  ggcorrplot.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    lab_col <span class="op">=</span> <span class="st">"yellow"</span>,</span>
<span>    lab_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    tl.srt <span class="op">=</span> <span class="fl">90</span>,</span>
<span>    pch.col <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    pch.cex <span class="op">=</span> <span class="fl">14</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="co">## modification outside `{ggstatsplot}` using `{ggplot2}` functions</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span></span>
<span>      margin <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">0.15</span>, r <span class="op">=</span> <span class="fl">0.15</span>, b <span class="op">=</span> <span class="fl">0.15</span>, l <span class="op">=</span> <span class="fl">0.15</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat4-1.png" width="100%"></p>
<p>As seen here, and unsurprisingly, the strongest predictor of the
diamond price is its carat value, which a unit of mass equal to 200 mg.
In other words, the heavier the diamond, the more expensive it is going
to be.</p>
</div>
<div class="section level2">
<h2 id="grouped-analysis-with-grouped_ggcorrmat">Grouped analysis with <code>grouped_ggcorrmat</code><a class="anchor" aria-label="anchor" href="#grouped-analysis-with-grouped_ggcorrmat"></a>
</h2>
<p>What if we want to do the same analysis separately for each quality
of the diamond <code>cut</code> (Fair, Good, Very Good, Premium,
Ideal)?</p>
<p><a href="https://indrajeetpatil.github.io/ggstatsplot/">ggstatsplot</a> provides a special helper function for
such instances: <code><a href="../../reference/grouped_ggcorrmat.html">grouped_ggcorrmat()</a></code>. This is merely a
wrapper function around <code><a href="../../reference/combine_plots.html">combine_plots()</a></code>. It applies
<code><a href="../../reference/ggcorrmat.html">ggcorrmat()</a></code> across all <strong>levels</strong> of a
specified <strong>grouping variable</strong> and then combines list of
individual plots into a single plot.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/grouped_ggcorrmat.html">grouped_ggcorrmat</a></span><span class="op">(</span></span>
<span>  <span class="co">## arguments relevant for `ggcorrmat()`</span></span>
<span>  data <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>,</span>
<span>  cor.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">price</span>, <span class="va">carat</span>, <span class="va">depth</span><span class="op">)</span>,</span>
<span>  grouping.var <span class="op">=</span> <span class="va">cut</span>,</span>
<span>  <span class="co">## arguments relevant for `combine_plots()`</span></span>
<span>  plotgrid.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  annotation.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    tag_levels <span class="op">=</span> <span class="st">"a"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Relationship between diamond attributes and price across cut"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Dataset: Diamonds from ggplot2 package"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat7-1.png" width="100%"></p>
<p>Note that this function also makes it easy to run the same
correlation matrix across different levels of a factor/grouping
variable.</p>
</div>
<div class="section level2">
<h2 id="data-frame">Data frame<a class="anchor" aria-label="anchor" href="#data-frame"></a>
</h2>
<p>If you want a data frame of (grouped) correlation matrix, use
<code><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation::correlation()</a></code> instead. It can also do grouped
analysis when used with output from <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="grouped-analysis-with-ggcorrmat-purrr">Grouped analysis with <code>ggcorrmat()</code> +
<code>{purrr}</code><a class="anchor" aria-label="anchor" href="#grouped-analysis-with-ggcorrmat-purrr"></a>
</h2>
<p>Although <code>grouped_</code> function is good for quickly exploring
the data, it reduces the flexibility with which this function can be
used. This is the because the common parameters used are applied to
plots corresponding to all levels of the grouping variable and there is
no way to customize the arguments for different levels of the grouping
variable. We will see how this can be done using the
<a href="https://purrr.tidyverse.org/" class="external-link">purrr</a> package.</p>
<p>See the associated vignette here: <a href="https://indrajeetpatil.github.io/ggstatsplot/articles/web_only/purrr_examples.html" class="uri">https://indrajeetpatil.github.io/ggstatsplot/articles/web_only/purrr_examples.html</a></p>
</div>
<div class="section level2">
<h2 id="summary-of-graphics-and-tests">Summary of graphics and tests<a class="anchor" aria-label="anchor" href="#summary-of-graphics-and-tests"></a>
</h2>
<p>Details about underlying functions used to create graphics and
statistical tests carried out can be found in the function
documentation: <a href="https://indrajeetpatil.github.io/ggstatsplot/reference/gghistostats.html" class="uri">https://indrajeetpatil.github.io/ggstatsplot/reference/gghistostats.html</a></p>
</div>
<div class="section level2">
<h2 id="suggestions">Suggestions<a class="anchor" aria-label="anchor" href="#suggestions"></a>
</h2>
<p>If you find any bugs or have any suggestions/remarks, please file an
issue on <code>GitHub</code>: <a href="https://github.com/IndrajeetPatil/ggstatsplot/issues" class="external-link uri">https://github.com/IndrajeetPatil/ggstatsplot/issues</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
