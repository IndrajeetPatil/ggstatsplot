<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggstatsplot">
<title>ggcorrmat • ggstatsplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="ggcorrmat">
<meta property="og:description" content="ggstatsplot">
<meta property="og:image" content="https://indrajeetpatil.github.io/ggstatsplot/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    <a class="navbar-brand me-2" href="../../index.html">ggstatsplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.9000</small>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Primary functions</h6>
    <a class="dropdown-item" href="../../articles/web_only/ggbetweenstats.html">ggbetweenstats</a>
    <a class="dropdown-item" href="../../articles/web_only/ggwithinstats.html">ggwithinstats</a>
    <a class="dropdown-item" href="../../articles/web_only/gghistostats.html">gghistostats</a>
    <a class="dropdown-item" href="../../articles/web_only/ggdotplotstats.html">ggdotplotstats</a>
    <a class="dropdown-item" href="../../articles/web_only/ggcorrmat.html">ggcorrmat</a>
    <a class="dropdown-item" href="../../articles/web_only/ggscatterstats.html">ggscatterstats</a>
    <a class="dropdown-item" href="../../articles/web_only/ggpiestats.html">ggpiestats</a>
    <a class="dropdown-item" href="../../articles/web_only/ggcoefstats.html">ggcoefstats</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Miscellaneous</h6>
    <a class="dropdown-item" href="../../articles/additional.html">additional vignettes</a>
    <a class="dropdown-item" href="../../articles/web_only/pairwise.html">Pairwise comparisons with `{ggstatsplot}`</a>
    <a class="dropdown-item" href="../../articles/web_only/faq.html">frequently asked questions (FAQ)</a>
    <a class="dropdown-item" href="../../articles/web_only/purrr_examples.html">using `{ggstatsplot}` with the `purrr` package</a>
    <a class="dropdown-item" href="../../articles/web_only/principles.html">Graphic design and statistical reporting principles</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/IndrajeetPatil/ggstatsplot/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article" id="container">

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1>ggcorrmat</h1>
                        <h4 data-toc-skip class="author">Indrajeet Patil</h4>
            
            <h4 data-toc-skip class="date">2021-11-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/IndrajeetPatil/ggstatsplot/blob/HEAD/vignettes/web_only/ggcorrmat.Rmd" class="external-link"><code>vignettes/web_only/ggcorrmat.Rmd</code></a></small>
      <div class="d-none name"><code>ggcorrmat.Rmd</code></div>
    </div>

    
    
<hr>
<p>You can cite this package/vignette as:</p>
<pre><code>
  Patil, I. (2021). Visualizations with statistical details: The
  'ggstatsplot' approach. Journal of Open Source Software, 6(61), 3167,
  doi:10.21105/joss.03167

A BibTeX entry for LaTeX users is

  @Article{,
    doi = {10.21105/joss.03167},
    url = {https://doi.org/10.21105/joss.03167},
    year = {2021},
    publisher = {{The Open Journal}},
    volume = {6},
    number = {61},
    pages = {3167},
    author = {Indrajeet Patil},
    title = {{Visualizations with statistical details: The {'ggstatsplot'} approach}},
    journal = {{Journal of Open Source Software}},
  }</code></pre>
<hr>
<p>Lifecycle: <a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></p>
<p>The function <code>ggcorrmat</code> provides a quick way to produce <strong>publication-ready correlation matrix</strong> (aka <em>correlalogram</em>) plot. The function can also be used for quick <strong>data exploration</strong>. In addition to the plot, it can also be used to get a correlation coefficient matrix or the associated <em>p</em>-value matrix. Currently, the plot can display Pearson’s <em>r</em> (and its Bayesian version), Spearman’s <em>rho</em>, and <em>robust</em> correlation coefficient (Winsorized Pearson’s <em>r</em>). This function is a convenient wrapper around <code><a href="https://rdrr.io/pkg/ggcorrplot/man/ggcorrplot.html" class="external-link">ggcorrplot::ggcorrplot</a></code> function with some additional functionality.</p>
<p>We will see examples of how to use this function in this vignette with the <code>gapminder</code> and <code>diamonds</code> dataset.</p>
<p>To begin with, here are some instances where you would want to use <code>ggcorrmat</code>-</p>
<ul>
<li>to easily visualize a correlation matrix using <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>
</li>
<li>to quickly explore correlation between (all) numeric variables in the dataset</li>
</ul>
<div class="section level2">
<h2 id="correlation-matrix-plot-with-ggcorrmat">Correlation matrix plot with <code>ggcorrmat</code><a class="anchor" aria-label="anchor" href="#correlation-matrix-plot-with-ggcorrmat"></a>
</h2>
<p>For the first example, we will use the <code>gapminder</code> dataset (available in eponymous <a href="https://CRAN.R-project.org/package=gapminder" class="external-link">package</a> on CRAN) provides values for life expectancy, Gross Domestic Product (GDP) per capita, and population, every five years, from 1952 to 2007, for each of 142 countries and was collected by the Gapminder Foundation. Let’s have a look at the data-</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder" class="external-link">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1,704</span>
<span class="co">#&gt; Columns: 6</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">country  </span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan", ~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">continent</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">year     </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">lifeExp  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">pop      </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">gdpPercap</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ~</span></code></pre></div>
<p>Let’s say we are interested in studying correlation between population of a country, average life expectancy, and GDP per capita across countries only for the year 2007.</p>
<p>The simplest way to get a correlation matrix is to stick to the defaults-</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## setup</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://indrajeetpatil.github.io/ggstatsplot/">ggstatsplot</a></span><span class="op">)</span>

<span class="co">## select data only from the year 2007</span>
<span class="va">gapminder_2007</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">gapminder</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/gapminder/man/gapminder.html" class="external-link">gapminder</a></span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span>

<span class="co">## producing the correlation matrix</span>
<span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">gapminder_2007</span>, <span class="co">## data from which variable is to be taken</span>
  cor.vars <span class="op">=</span> <span class="va">lifeExp</span><span class="op">:</span><span class="va">gdpPercap</span> <span class="co">## specifying correlation matrix variables</span>
<span class="op">)</span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat1-1.png" width="100%"></p>
<p>This plot can be further modified with additional arguments-</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">gapminder_2007</span>, <span class="co">## data from which variable is to be taken</span>
  cor.vars <span class="op">=</span> <span class="va">lifeExp</span><span class="op">:</span><span class="va">gdpPercap</span>, <span class="co">## specifying correlation matrix variables</span>
  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"Life Expectancy"</span>,
    <span class="st">"population"</span>,
    <span class="st">"GDP (per capita)"</span>
  <span class="op">)</span>,
  type <span class="op">=</span> <span class="st">"spearman"</span>, <span class="co">## which correlation coefficient is to be computed</span>
  lab.col <span class="op">=</span> <span class="st">"red"</span>, <span class="co">## label color</span>
  ggtheme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span>, <span class="co">## selected ggplot2 theme</span>
  <span class="co">## turn off default ggestatsplot theme overlay</span>
  matrix.type <span class="op">=</span> <span class="st">"lower"</span>, <span class="co">## correlation matrix structure</span>
  colors <span class="op">=</span> <span class="cn">NULL</span>, <span class="co">## turning off manual specification of colors</span>
  palette <span class="op">=</span> <span class="st">"category10_d3"</span>, <span class="co">## choosing a color palette</span>
  package <span class="op">=</span> <span class="st">"ggsci"</span>, <span class="co">## package to which color palette belongs</span>
  title <span class="op">=</span> <span class="st">"Gapminder correlation matrix"</span>, <span class="co">## custom title</span>
  subtitle <span class="op">=</span> <span class="st">"Source: Gapminder Foundation"</span> <span class="co">## custom subtitle</span>
<span class="op">)</span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat2-1.png" width="100%"></p>
<p>As seen from this correlation matrix, although there is no relationship between population and life expectancy worldwide, at least in 2007, there is a strong positive relationship between GDP, a well-established indicator of a country’s economic performance.</p>
<p>Given that there were only three variables, this doesn’t look that impressive. So let’s work with another example from <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> package: the <code>diamonds</code> <a href="http://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">dataset</a>. This dataset contains the prices and other attributes of almost 54,000 diamonds.</p>
<p>Let’s have a look at the data-</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span><span class="op">)</span>
<span class="co">#&gt; Rows: 53,940</span>
<span class="co">#&gt; Columns: 10</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">carat  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.23, 0.21, 0.23, 0.29, 0.31, 0.24, 0.24, 0.26, 0.22, 0.23, 0.~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">cut    </span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> Ideal, Premium, Good, Premium, Good, Very Good, Very Good, Ver~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">color  </span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> E, E, E, I, J, J, I, H, E, H, J, J, F, J, E, E, I, J, J, J, I,~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">clarity</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> SI2, SI1, VS1, VS2, SI2, VVS2, VVS1, SI1, VS2, VS1, SI1, VS1, ~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">depth  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 61.5, 59.8, 56.9, 62.4, 63.3, 62.8, 62.3, 61.9, 65.1, 59.4, 64~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">table  </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 55, 61, 65, 58, 58, 57, 57, 55, 61, 61, 55, 56, 61, 54, 62, 58~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">price  </span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 326, 326, 327, 334, 335, 336, 336, 337, 337, 338, 339, 340, 34~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">x      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.95, 3.89, 4.05, 4.20, 4.34, 3.94, 3.95, 4.07, 3.87, 4.00, 4.~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">y      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.98, 3.84, 4.07, 4.23, 4.35, 3.96, 3.98, 4.11, 3.78, 4.05, 4.~</span>
<span class="co">#&gt; $ <span style="font-weight: bold;">z      </span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2.43, 2.31, 2.31, 2.63, 2.75, 2.48, 2.47, 2.53, 2.49, 2.39, 2.~</span></code></pre></div>
<p>Let’s see the correlation matrix between different attributes of the diamond and the price.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>

<span class="co">## let's use just 5% of the data to speed it up</span>
<span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>, size <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,
  cor.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">carat</span>, <span class="va">depth</span><span class="op">:</span><span class="va">z</span><span class="op">)</span>, <span class="co">## note how the variables are getting selected</span>
  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"carat"</span>,
    <span class="st">"total depth"</span>,
    <span class="st">"table"</span>,
    <span class="st">"price"</span>,
    <span class="st">"length (in mm)"</span>,
    <span class="st">"width (in mm)"</span>,
    <span class="st">"depth (in mm)"</span>
  <span class="op">)</span>,
  ggcorrplot.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>outline.color <span class="op">=</span> <span class="st">"black"</span>, hc.order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat3-1.png" width="100%"></p>
<p>We can make a number of changes to this basic correlation matrix. For example, since we were interested in relationship between price and other attributes, let’s make the <code>price</code> column to the the first column.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>

<span class="co">## let's use just 5% of the data to speed it up</span>
<span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>, size <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,
  cor.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">price</span>, <span class="va">carat</span>, <span class="va">depth</span><span class="op">:</span><span class="va">table</span>, <span class="va">x</span><span class="op">:</span><span class="va">z</span><span class="op">)</span>, <span class="co">## note how the variables are getting selected</span>
  cor.vars.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"price"</span>,
    <span class="st">"carat"</span>,
    <span class="st">"total depth"</span>,
    <span class="st">"table"</span>,
    <span class="st">"length (in mm)"</span>,
    <span class="st">"width (in mm)"</span>,
    <span class="st">"depth (in mm)"</span>
  <span class="op">)</span>,
  type <span class="op">=</span> <span class="st">"spearman"</span>,
  title <span class="op">=</span> <span class="st">"Relationship between diamond attributes and price"</span>,
  subtitle <span class="op">=</span> <span class="st">"Dataset: Diamonds from ggplot2 package"</span>,
  colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span><span class="op">)</span>,
  pch <span class="op">=</span> <span class="st">"square cross"</span>,
  <span class="co">## additional aesthetic arguments passed to `ggcorrmat`</span>
  ggcorrplot.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    lab_col <span class="op">=</span> <span class="st">"yellow"</span>,
    lab_size <span class="op">=</span> <span class="fl">6</span>,
    tl.srt <span class="op">=</span> <span class="fl">90</span>,
    pch.col <span class="op">=</span> <span class="st">"white"</span>,
    pch.cex <span class="op">=</span> <span class="fl">14</span>
  <span class="op">)</span>
<span class="op">)</span> <span class="op">+</span> <span class="co">## modification outside `{ggstatsplot}` using `{ggplot2}` functions</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>
    axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>
      margin <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">0.15</span>, r <span class="op">=</span> <span class="fl">0.15</span>, b <span class="op">=</span> <span class="fl">0.15</span>, l <span class="op">=</span> <span class="fl">0.15</span>, unit <span class="op">=</span> <span class="st">"cm"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat4-1.png" width="100%"></p>
<p>As seen here, and unsurprisingly, the strongest predictor of the diamond price is its carat value, which a unit of mass equal to 200 mg. In other words, the heavier the diamond, the more expensive it is going to be.</p>
</div>
<div class="section level2">
<h2 id="dataframe-containing-statistics-with-ggcorrmat">Dataframe containing statistics with <code>ggcorrmat</code><a class="anchor" aria-label="anchor" href="#dataframe-containing-statistics-with-ggcorrmat"></a>
</h2>
<p>Another utility of <code>ggcorrmat</code> is in obtaining a dataframe containing all details from statistical analyses. Such dataframes can be easily embedded in manuscripts as tables.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>

<span class="co">## to get correlations</span>
<span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/txhousing.html" class="external-link">txhousing</a></span>, size <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span>,
  cor.vars <span class="op">=</span> <span class="va">sales</span><span class="op">:</span><span class="va">inventory</span>,
  output <span class="op">=</span> <span class="st">"dataframe"</span>,
  type <span class="op">=</span> <span class="st">"robust"</span>,
  digits <span class="op">=</span> <span class="fl">3</span>
<span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 x 11</span></span>
<span class="co">#&gt;    <span style="font-weight: bold;">parameter1</span> <span style="font-weight: bold;">parameter2</span> <span style="font-weight: bold;">estimate</span> <span style="font-weight: bold;">conf.level</span> <span style="font-weight: bold;">conf.low</span> <span style="font-weight: bold;">conf.high</span> <span style="font-weight: bold;">statistic</span></span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> sales      volume        <span style="color: #949494;">0.</span>983       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>981     <span style="color: #949494;">0.</span>985    185.  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> sales      median        <span style="color: #949494;">0.</span>478       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>433     <span style="color: #949494;">0.</span>521     18.8 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> sales      listings      <span style="color: #949494;">0.</span>885       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>872     <span style="color: #949494;">0.</span>898     62.7 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> sales      inventory    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">457</span>       <span style="color: #949494;">0.</span>95   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">503</span>    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">409</span>    -<span style="color: #BB0000;">16.9</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> volume     median        <span style="color: #949494;">0.</span>575       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>536     <span style="color: #949494;">0.</span>612     24.3 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> volume     listings      <span style="color: #949494;">0.</span>876       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>862     <span style="color: #949494;">0.</span>889     59.8 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> volume     inventory    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">437</span>       <span style="color: #949494;">0.</span>95   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">484</span>    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">388</span>    -<span style="color: #BB0000;">16.0</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> median     listings      <span style="color: #949494;">0.</span>428       <span style="color: #949494;">0.</span>95    <span style="color: #949494;">0.</span>378     <span style="color: #949494;">0.</span>475     15.6 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> median     inventory    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">193</span>       <span style="color: #949494;">0.</span>95   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">250</span>    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">135</span>     -<span style="color: #BB0000;">6.47</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> listings   inventory    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">170</span>       <span style="color: #949494;">0.</span>95   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">228</span>    -<span style="color: #949494;">0.</span><span style="color: #BB0000;">112</span>     -<span style="color: #BB0000;">5.69</span></span>
<span class="co">#&gt;    <span style="font-weight: bold;">df.error</span>   <span style="font-weight: bold;">p.value</span> <span style="font-weight: bold;">method</span>                         <span style="font-weight: bold;">n.obs</span></span>
<span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     <span style="text-decoration: underline;">1</span>20<span style="color: #949494;">2</span> <span style="color: #949494;">0</span>   <span style="color: #949494;"> </span>     Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>20<span style="color: #949494;">4</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     <span style="text-decoration: underline;">1</span>19<span style="color: #949494;">5</span> 1.21<span style="color: #949494;">e</span><span style="color: #BB0000;">- 68</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>19<span style="color: #949494;">7</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">3</span> <span style="color: #949494;">0</span>   <span style="color: #949494;"> </span>     Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">5</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">0</span> 2.55<span style="color: #949494;">e</span><span style="color: #BB0000;">- 56</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">2</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     <span style="text-decoration: underline;">1</span>19<span style="color: #949494;">5</span> 1.45<span style="color: #949494;">e</span><span style="color: #BB0000;">-105</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>19<span style="color: #949494;">7</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">3</span> <span style="color: #949494;">0</span>   <span style="color: #949494;"> </span>     Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">5</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">0</span> 3.39<span style="color: #949494;">e</span><span style="color: #BB0000;">- 51</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">2</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">3</span> 4.17<span style="color: #949494;">e</span><span style="color: #BB0000;">- 49</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">5</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">0</span> 2.94<span style="color: #949494;">e</span><span style="color: #BB0000;">- 10</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">2</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">0</span> 1.68<span style="color: #949494;">e</span><span style="color: #BB0000;">-  8</span> Winsorized Pearson correlation  <span style="text-decoration: underline;">1</span>08<span style="color: #949494;">2</span></span></code></pre></div>
<p>Note that if <code>cor.vars</code> are not specified, all numeric variables will be used. Moreover, you can also use abbreviations to specify what output you want in return. Additionally, one can also carry out <strong>partial</strong> correlation analysis:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>pillar.sigfig <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="co">## getting the correlation coefficient matrix</span>
<span class="fu"><a href="../../reference/ggcorrmat.html">ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">iris</span>, <span class="co">## all numeric variables from data will be used</span>
  type <span class="op">=</span> <span class="st">"np"</span>, <span class="co">## non-parametric</span>
  partial <span class="op">=</span> <span class="cn">TRUE</span>,
  output <span class="op">=</span> <span class="st">"dataframe"</span>
<span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 10</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">parameter1</span>   <span style="font-weight: bold;">parameter2</span>   <span style="font-weight: bold;">estimate</span> <span style="font-weight: bold;">conf.level</span> <span style="font-weight: bold;">conf.low</span> <span style="font-weight: bold;">conf.high</span> <span style="font-weight: bold;">statistic</span></span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length Sepal.Width    <span style="color: #949494;">0.</span>615<span style="text-decoration: underline;">7</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>501<span style="text-decoration: underline;">7</span>    <span style="color: #949494;">0.</span>708<span style="text-decoration: underline;">7</span>   <span style="text-decoration: underline;">216</span>1<span style="color: #949494;">64</span>.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Length Petal.Length   <span style="color: #949494;">0.</span>681<span style="text-decoration: underline;">7</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>582<span style="text-decoration: underline;">2</span>    <span style="color: #949494;">0.</span>761<span style="text-decoration: underline;">0</span>   <span style="text-decoration: underline;">179</span>0<span style="color: #949494;">48</span>.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Sepal.Length Petal.Width   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">303</span><span style="color: #BB0000; text-decoration: underline;">6</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">446</span><span style="color: #BB0000; text-decoration: underline;">1</span>   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">146</span><span style="color: #BB0000; text-decoration: underline;">0</span>   <span style="text-decoration: underline;">733</span>2<span style="color: #949494;">26</span>.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Sepal.Width  Petal.Length  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">633</span><span style="color: #BB0000; text-decoration: underline;">9</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">723</span><span style="color: #BB0000; text-decoration: underline;">2</span>   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">523</span><span style="color: #BB0000; text-decoration: underline;">7</span>   <span style="text-decoration: underline;">919</span>0<span style="color: #949494;">30</span>.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Sepal.Width  Petal.Width    <span style="color: #949494;">0.</span>362<span style="text-decoration: underline;">4</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>210<span style="text-decoration: underline;">0</span>    <span style="color: #949494;">0.</span>497<span style="text-decoration: underline;">5</span>   <span style="text-decoration: underline;">358</span>6<span style="color: #949494;">55</span>.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Petal.Length Petal.Width    <span style="color: #949494;">0.</span>862<span style="text-decoration: underline;">6</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>813<span style="text-decoration: underline;">4</span>    <span style="color: #949494;">0.</span>899<span style="text-decoration: underline;">5</span>    <span style="text-decoration: underline;">77</span>30<span style="color: #949494;">3</span>.</span>
<span class="co">#&gt;     <span style="font-weight: bold;">p.value</span> <span style="font-weight: bold;">method</span>               <span style="font-weight: bold;">n.obs</span></span>
<span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1.528<span style="color: #949494;">e</span><span style="color: #BB0000;">-16</span> Spearman correlation   150</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 3.937<span style="color: #949494;">e</span><span style="color: #BB0000;">-21</span> Spearman correlation   150</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1.591<span style="color: #949494;">e</span><span style="color: #BB0000;">- 4</span> Spearman correlation   150</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1.249<span style="color: #949494;">e</span><span style="color: #BB0000;">-17</span> Spearman correlation   150</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 1.039<span style="color: #949494;">e</span><span style="color: #BB0000;">- 5</span> Spearman correlation   150</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 7.322<span style="color: #949494;">e</span><span style="color: #BB0000;">-45</span> Spearman correlation   150</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="grouped-analysis-with-grouped_ggcorrmat">Grouped analysis with <code>grouped_ggcorrmat</code><a class="anchor" aria-label="anchor" href="#grouped-analysis-with-grouped_ggcorrmat"></a>
</h2>
<p>What if we want to do the same analysis separately for each quality of the diamond <code>cut</code> (Fair, Good, Very Good, Premium, Ideal)?</p>
<p><a href="https://indrajeetpatil.github.io/ggstatsplot/">ggstatsplot</a> provides a special helper function for such instances: <code>grouped_ggcorrmat</code>. This is merely a wrapper function around <code>combine_plots</code>. It applies <code>ggcorrmat</code> across all <strong>levels</strong> of a specified <strong>grouping variable</strong> and then combines list of individual plots into a single plot. Note that the grouping variable can be anything: conditions in a given study, groups in a study sample, different studies, etc.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>

<span class="co">## plot</span>
<span class="fu"><a href="../../reference/grouped_ggcorrmat.html">grouped_ggcorrmat</a></span><span class="op">(</span>
  <span class="co">## arguments relevant for `ggcorrmat`</span>
  data <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span>,
  type <span class="op">=</span> <span class="st">"bayes"</span>, <span class="co">## Bayesian test</span>
  grouping.var <span class="op">=</span> <span class="va">cut</span>,
  <span class="co">## arguments relevant for `combine_plots`</span>
  plotgrid.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,
  annotation.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    tag_levels <span class="op">=</span> <span class="st">"a"</span>,
    title <span class="op">=</span> <span class="st">"Relationship between diamond attributes and price across cut"</span>,
    caption <span class="op">=</span> <span class="st">"Dataset: Diamonds from ggplot2 package"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="ggcorrmat_files/figure-html/ggcorrmat7-1.png" width="100%"></p>
<p>Note that this function also makes it easy to run the same correlation matrix across different levels of a factor/grouping variable.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for reproducibility</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>

<span class="co">## let's obtain correlation coefficients with their CIs</span>
<span class="fu"><a href="../../reference/grouped_ggcorrmat.html">grouped_ggcorrmat</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/msleep.html" class="external-link">msleep</a></span>,
  cor.vars <span class="op">=</span> <span class="va">sleep_total</span><span class="op">:</span><span class="va">awake</span>,
  grouping.var <span class="op">=</span> <span class="va">vore</span>,
  output <span class="op">=</span> <span class="st">"dataframe"</span>
<span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 24 x 12</span></span>
<span class="co">#&gt;    <span style="font-weight: bold;">vore</span>  <span style="font-weight: bold;">parameter1</span>  <span style="font-weight: bold;">parameter2</span>  <span style="font-weight: bold;">estimate</span> <span style="font-weight: bold;">conf.level</span> <span style="font-weight: bold;">conf.low</span> <span style="font-weight: bold;">conf.high</span></span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> carni sleep_total sleep_rem     <span style="color: #949494;">0.</span>918<span style="text-decoration: underline;">9</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>686<span style="text-decoration: underline;">4</span>    <span style="color: #949494;">0.</span>981<span style="text-decoration: underline;">0</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> carni sleep_total sleep_cycle   <span style="color: #949494;">0.</span>376<span style="text-decoration: underline;">4</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">757</span><span style="color: #BB0000; text-decoration: underline;">4</span>    <span style="color: #949494;">0.</span>944<span style="text-decoration: underline;">9</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> carni sleep_total awake        -<span style="color: #BB0000;">1.000</span>        <span style="color: #949494;">0.</span>95  -<span style="color: #BB0000;">1.000</span>    -<span style="color: #BB0000;">1.000</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> carni sleep_rem   sleep_cycle   <span style="color: #949494;">0.</span>121<span style="text-decoration: underline;">6</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">852</span><span style="color: #BB0000; text-decoration: underline;">1</span>    <span style="color: #949494;">0.</span>906<span style="text-decoration: underline;">6</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> carni sleep_rem   awake        -<span style="color: #949494;">0.</span><span style="color: #BB0000;">918</span><span style="color: #BB0000; text-decoration: underline;">9</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">981</span><span style="color: #BB0000; text-decoration: underline;">0</span>   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">686</span><span style="color: #BB0000; text-decoration: underline;">5</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> carni sleep_cycle awake        -<span style="color: #949494;">0.</span><span style="color: #BB0000;">376</span><span style="color: #BB0000; text-decoration: underline;">4</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">944</span><span style="color: #BB0000; text-decoration: underline;">9</span>    <span style="color: #949494;">0.</span>757<span style="text-decoration: underline;">4</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> herbi sleep_total sleep_rem     <span style="color: #949494;">0.</span>861<span style="text-decoration: underline;">0</span>       <span style="color: #949494;">0.</span>95   <span style="color: #949494;">0.</span>701<span style="text-decoration: underline;">2</span>    <span style="color: #949494;">0.</span>938<span style="text-decoration: underline;">5</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> herbi sleep_total sleep_cycle  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">714</span><span style="color: #BB0000; text-decoration: underline;">8</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">913</span><span style="color: #BB0000; text-decoration: underline;">8</span>   -<span style="color: #949494;">0.</span><span style="color: #BB0000;">238</span><span style="color: #BB0000; text-decoration: underline;">9</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> herbi sleep_total awake        -<span style="color: #BB0000;">1</span>            <span style="color: #949494;">0.</span>95  -<span style="color: #BB0000;">1</span>        -<span style="color: #BB0000;">1</span>     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> herbi sleep_rem   sleep_cycle  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">407</span><span style="color: #BB0000; text-decoration: underline;">0</span>       <span style="color: #949494;">0.</span>95  -<span style="color: #949494;">0.</span><span style="color: #BB0000;">795</span><span style="color: #BB0000; text-decoration: underline;">2</span>    <span style="color: #949494;">0.</span>217<span style="text-decoration: underline;">8</span></span>
<span class="co">#&gt;    <span style="font-weight: bold;">statistic</span> <span style="font-weight: bold;">df.error</span>    <span style="font-weight: bold;">p.value</span> <span style="font-weight: bold;">method</span>              <span style="font-weight: bold;">n.obs</span></span>
<span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  6.589<span style="color: #949494;">e</span>+0        8 8.564<span style="color: #949494;">e</span><span style="color: #BB0000;">-  4</span> Pearson correlation    10</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  7.038<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span>        3 1    <span style="color: #949494;">e</span>+  0 Pearson correlation     5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">1.386</span><span style="color: #949494;">e</span>+3       17 1.284<span style="color: #949494;">e</span><span style="color: #BB0000;">- 43</span> Pearson correlation    19</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  2.122<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span>        3 1    <span style="color: #949494;">e</span>+  0 Pearson correlation     5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> -<span style="color: #BB0000;">6.589</span><span style="color: #949494;">e</span>+0        8 8.564<span style="color: #949494;">e</span><span style="color: #BB0000;">-  4</span> Pearson correlation    10</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">7.038</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span>        3 1    <span style="color: #949494;">e</span>+  0 Pearson correlation     5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  7.942<span style="color: #949494;">e</span>+0       22 3.330<span style="color: #949494;">e</span><span style="color: #BB0000;">-  7</span> Pearson correlation    24</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">3.232</span><span style="color: #949494;">e</span>+0       10 2.697<span style="color: #949494;">e</span><span style="color: #BB0000;">-  2</span> Pearson correlation    12</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">3.676</span><span style="color: #949494;">e</span>+8       30 1.363<span style="color: #949494;">e</span><span style="color: #BB0000;">-235</span> Pearson correlation    32</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">1.409</span><span style="color: #949494;">e</span>+0       10 1.891<span style="color: #949494;">e</span><span style="color: #BB0000;">-  1</span> Pearson correlation    12</span>
<span class="co">#&gt; <span style="color: #949494;"># ... with 14 more rows</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="grouped-analysis-with-ggcorrmat-purrr">Grouped analysis with <code>ggcorrmat</code> + <code>purrr</code><a class="anchor" aria-label="anchor" href="#grouped-analysis-with-ggcorrmat-purrr"></a>
</h2>
<p>Although <code>grouped_</code> function is good for quickly exploring the data, it reduces the flexibility with which this function can be used. This is the because the common parameters used are applied to plots corresponding to all levels of the grouping variable and there is no way to customize the arguments for different levels of the grouping variable. We will see how this can be done using the <code>purrr</code> package.</p>
<p>See the associated vignette here: <a href="https://indrajeetpatil.github.io/ggstatsplot/articles/web_only/purrr_examples.html" class="uri">https://indrajeetpatil.github.io/ggstatsplot/articles/web_only/purrr_examples.html</a></p>
</div>
<div class="section level2">
<h2 id="summary-of-graphics">Summary of graphics<a class="anchor" aria-label="anchor" href="#summary-of-graphics"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th>graphical element</th>
<th>
<code>geom_</code> used</th>
<th>argument for further modification</th>
</tr></thead>
<tbody><tr class="odd">
<td>correlation matrix</td>
<td><code><a href="https://rdrr.io/pkg/ggcorrplot/man/ggcorrplot.html" class="external-link">ggcorrplot::ggcorrplot</a></code></td>
<td><code>ggcorrplot.args</code></td>
</tr></tbody>
</table>
</div>
<div class="section level2">
<h2 id="summary-of-tests">Summary of tests<a class="anchor" aria-label="anchor" href="#summary-of-tests"></a>
</h2>
<p><strong>Hypothesis testing</strong> and <strong>Effect size estimation</strong></p>
<table class="table">
<colgroup>
<col width="25%">
<col width="56%">
<col width="6%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th>Type</th>
<th>Test</th>
<th>CI?</th>
<th>Function used</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Parametric</td>
<td>Pearson’s correlation coefficient</td>
<td>✅</td>
<td><code><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation::correlation</a></code></td>
</tr>
<tr class="even">
<td>Non-parametric</td>
<td>Spearman’s rank correlation coefficient</td>
<td>✅</td>
<td><code><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation::correlation</a></code></td>
</tr>
<tr class="odd">
<td>Robust</td>
<td>Winsorized Pearson correlation coefficient</td>
<td>✅</td>
<td><code><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation::correlation</a></code></td>
</tr>
<tr class="even">
<td>Bayesian</td>
<td>Pearson’s correlation coefficient</td>
<td>✅</td>
<td><code><a href="https://easystats.github.io/correlation/reference/correlation.html" class="external-link">correlation::correlation</a></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="suggestions">Suggestions<a class="anchor" aria-label="anchor" href="#suggestions"></a>
</h2>
<p>If you find any bugs or have any suggestions/remarks, please file an issue on <code>GitHub</code>: <a href="https://github.com/IndrajeetPatil/ggstatsplot/issues" class="external-link uri">https://github.com/IndrajeetPatil/ggstatsplot/issues</a></p>
</div>
  </div>
 <div class="col-md-3" id="pkgdown-sidebar">
        <nav id="toc"><h2>On this page</h2>
    </nav>
</div>

</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
